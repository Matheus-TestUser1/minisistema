{% extends "base.html" %}

{% block title %}Tal√£o Loja - {{ receipt.numero }}{% endblock %}

{% block extra_css %}
<style>
    .store-specific {
        background: #e8f4f8;
        border-left-color: #3498db;
    }
    .receipt-type {
        color: #3498db;
    }
</style>
{% endblock %}

{% block content %}
<div class="receipt-container">
    <div class="header">
        <h1>üå≤ {{ empresa.nome }}</h1>
        <div class="company-info">
            <div>{{ empresa.endereco }}</div>
            <div>{{ empresa.cidade }}</div>
            <div>Tel: {{ empresa.telefone }} | CNPJ: {{ empresa.cnpj }}</div>
        </div>
    </div>
    
    <div class="receipt-info store-specific">
        <h2>TAL√ÉO DA LOJA</h2>
        <div class="info-grid">
            <div class="info-item">
                <span class="info-label">N√∫mero:</span>
                <span>{{ receipt.numero }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Data:</span>
                <span>{{ data_emissao }}</span>
            </div>
            <div class="info-item" style="grid-column: 1 / -1;">
                <span class="info-label">Cliente:</span>
                <span>{{ receipt.cliente_nome }}</span>
            </div>
        </div>
    </div>
    
    <table class="items-table">
        <thead>
            <tr>
                <th>C√≥digo</th>
                <th>Descri√ß√£o</th>
                <th>Qtd</th>
                <th>Pre√ßo Unit.</th>
                <th>Total</th>
                <th>Peso (kg)</th>
            </tr>
        </thead>
        <tbody>
            {% for item in receipt.items %}
            <tr>
                <td>{{ item.produto_codigo }}</td>
                <td>{{ item.descricao }}</td>
                <td>{{ item.quantidade }}</td>
                <td>R$ {{ "%.2f"|format(item.preco_unitario) }}</td>
                <td>R$ {{ "%.2f"|format(item.subtotal) }}</td>
                <td>{{ "%.3f"|format(item.peso * item.quantidade) if item.peso else "N/A" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div class="totals">
        <div class="total-line">
            <span>Subtotal:</span>
            <span>R$ {{ "%.2f"|format(receipt.subtotal) }}</span>
        </div>
        <div class="total-line">
            <span>Frete:</span>
            <span>R$ {{ "%.2f"|format(receipt.frete) }}</span>
        </div>
        <div class="total-line total-final">
            <span>TOTAL GERAL:</span>
            <span>R$ {{ "%.2f"|format(receipt.total) }}</span>
        </div>
    </div>
    
    {% if receipt.observacoes %}
    <div class="observations">
        <strong>Observa√ß√µes:</strong><br>
        {{ receipt.observacoes }}
    </div>
    {% endif %}
    
    <div class="footer">
        <p class="receipt-type">*** VIA DA LOJA ***</p>
        <p><em>Arquivo interno para controle</em></p>
    </div>
</div>
{% endblock %}